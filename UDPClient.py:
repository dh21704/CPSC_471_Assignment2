from socket import *
import time

serverName = 'localhost'
serverPort = 12000
clientSocket = socket(AF_INET, SOCK_DGRAM)
clientSocket.settimeout(1)  # 1 second timeout

for i in range(1, 51):  # 50 pings
    message = f"Ping {i} {time.time()}"
    start = time.time()
    clientSocket.sendto(message.encode(), (serverName, serverPort))

    try:
        modifiedMessage, serverAddress = clientSocket.recvfrom(1024)
        end = time.time()
        rtt = (end - start) * 1000
        print(f"Reply from {serverName}: {modifiedMessage.decode()}  RTT = {rtt:.2f} ms")
    except timeout:
        print(f"Request timed out for ping {i}")

clientSocket.close()
